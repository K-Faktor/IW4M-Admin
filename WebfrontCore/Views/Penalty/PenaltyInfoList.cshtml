@using SharedLibraryCore.Dtos
@using Data.Models
@using IW4MAdmin.WebfrontCore.Permissions
@using SharedLibraryCore
@model IList<SharedLibraryCore.Dtos.PenaltyInfo>

@{
    Layout = null;

    bool CanSeeLevel(PenaltyInfo penalty) => (ViewBag.PermissionsSet as IEnumerable<string>).HasPermission(WebfrontEntity.ClientLevel, WebfrontPermission.Read) || penalty.PenaltyType == EFPenalty.PenaltyType.Report;
}

@{
    foreach (var penalty in Model.Where(CanSeeLevel))
    {
        await Html.RenderPartialAsync("_Penalty", penalty);
    }
}
